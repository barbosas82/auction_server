
<html>
<head>
  <link rel="stylesheet" href="public.css" />
  <script type="text/javascript" src="script/jquery.min.js"></script>
  <script type="text/javascript">

      function validateLogin(){
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        $.ajax({
          type: 'POST',
          url: 'http://bid2.doismeios.pt:8080/authenticate',
          contentType: "application/json; charset=utf-8",
          data: "{\"username\": \"" + username + "\", \"password\": \"" +  password  +  "\"}",
          dataType: "json",
          success: function (data, status, jqXHR) {
            if (data.success){
              document.cookie = "x-access-token=" + data.token + "; path=/;"; //set token cookie
              window.location.href = "/private/"; //redirect to authenticated page
            }else{
              alert("Error: " + data.message);
            }
          },
           error: function (jqXHR, status) {
               // error handler
               alert(JSON.stringify(jqXHR));
           }
          });
        }

  </script>
</head>

<body>

    <div id="parent">
    <form method="post" action="javascript:validateLogin()">
      <fieldset>
        <legend>Login</legend>

      <div class="container">
        <input style="width: 100px;" type="text" name="login" id="username" value="" placeholder="Username">
        <input style="width: 100px;"type="password" name="password" id="password" value="" placeholder="Password">
        <button type="submit" class="buttonGreen"><b>Login</b></button>
      </div>

      <div class="container" style="background-color:#f1f1f1">
        <button type="button" class="buttonRed"><b>Cancel</b></button>
        <span class="password">Forgot <a href="#">password?</a></span>
      </div>
      </fieldset>

    </form>
  </div>



</body>

</html>
