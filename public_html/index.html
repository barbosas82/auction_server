
<html>
<head>
  <link rel="stylesheet" href="public.css" />
  <script type="text/javascript" src="script/jquery.min.js"></script>
  <script type="text/javascript">

      function validateLogin(){
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        $.ajax({
          type: 'POST',
          url: 'http://bid2.doismeios.pt:8080/authenticate',
          contentType: "application/json; charset=utf-8",
          data: "{\"username\": \"" + username + "\", \"password\": \"" +  password  +  "\"}",
          dataType: "json",
          success: function (data, status, jqXHR) {
            if (data.success){
              document.cookie = "x-access-token=" + data.token + "; path=/;"; //set token cookie
              window.location.href = "/private/"; //redirect to authenticated page
            }else{
              alert("Error: " + data.message);
            }
          },
           error: function (jqXHR, status) {
               // error handler
               alert(JSON.stringify(jqXHR));
           }
          });
        }

  </script>
</head>

<body>
  <div id="loginbox">
    <form method="post" action="javascript:validateLogin()">
      <p>Username: <input style="width: 50px;"type="text" name="login" id="username" value="" placeholder="Username">  Password: <input type="password" name="password" id="password" value="" placeholder="Password"></p>
      <p class="remember_me">
        <label>
          <input type="checkbox" name="remember_me" id="remember_me"/>
            Remember me.
        </label>
        <input type="submit" name="commit" value="Login">
      </p>
    </form>
  </div>

</body>

</html>
